[gd_scene load_steps=22 format=3 uid="uid://bpmxgefdkc2dv"]

[ext_resource type="Texture2D" uid="uid://cspp3bwp4bs6x" path="res://assets/enemys/shell/rotate-empty/SNES - Super Mario World - Koopas & Masked Koopas copy-Sheet.png" id="1_bo4bk"]
[ext_resource type="Script" uid="uid://cawwrk5vjurxc" path="res://scripts/Objects/Shell/Shell.cs" id="1_k7uw7"]
[ext_resource type="Script" uid="uid://btvu1yif2qtry" path="res://scripts/Objects/Shell/states/ShellIdle.cs" id="3_k7uw7"]
[ext_resource type="Script" uid="uid://ccm0vbsu0k4q" path="res://scripts/States/StateMachine.cs" id="3_qr86p"]
[ext_resource type="Script" uid="uid://bra3p5kfrcf17" path="res://scripts/Objects/Shell/states/ShellSpin.cs" id="4_qr86p"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_fdvxk"]
size = Vector2(34.7078, 21.416)

[sub_resource type="AtlasTexture" id="AtlasTexture_sb42f"]
atlas = ExtResource("1_bo4bk")
region = Rect2(64, 16, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_6fq18"]
atlas = ExtResource("1_bo4bk")
region = Rect2(64, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_8y80q"]
atlas = ExtResource("1_bo4bk")
region = Rect2(80, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_k7uw7"]
atlas = ExtResource("1_bo4bk")
region = Rect2(64, 16, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_qr86p"]
atlas = ExtResource("1_bo4bk")
region = Rect2(80, 16, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_fdvxk"]
atlas = ExtResource("1_bo4bk")
region = Rect2(96, 16, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_vvj04"]
atlas = ExtResource("1_bo4bk")
region = Rect2(112, 16, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_sow7m"]
atlas = ExtResource("1_bo4bk")
region = Rect2(0, 16, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_yy0sh"]
atlas = ExtResource("1_bo4bk")
region = Rect2(0, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_qqijv"]
atlas = ExtResource("1_bo4bk")
region = Rect2(16, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_jf6aw"]
atlas = ExtResource("1_bo4bk")
region = Rect2(0, 16, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_30ywq"]
atlas = ExtResource("1_bo4bk")
region = Rect2(16, 16, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_khbe3"]
atlas = ExtResource("1_bo4bk")
region = Rect2(32, 16, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_uout3"]
atlas = ExtResource("1_bo4bk")
region = Rect2(48, 16, 16, 16)

[sub_resource type="SpriteFrames" id="SpriteFrames_piqpj"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_sb42f")
}],
"loop": true,
"name": &"green-dle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_6fq18")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_8y80q")
}],
"loop": true,
"name": &"green-merge",
"speed": 10.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_k7uw7")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_qr86p")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_fdvxk")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_vvj04")
}],
"loop": true,
"name": &"green-spin",
"speed": 30.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_sow7m")
}],
"loop": true,
"name": &"red-idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_yy0sh")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_qqijv")
}],
"loop": true,
"name": &"red-merge",
"speed": 10.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_jf6aw")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_30ywq")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_khbe3")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_uout3")
}],
"loop": true,
"name": &"red-spin",
"speed": 30.0
}]

[node name="Shell" type="RigidBody2D" node_paths=PackedStringArray("animationShell")]
z_index = 2
collision_layer = 128
collision_mask = 4
script = ExtResource("1_k7uw7")
animationShell = NodePath("AnimatedSprite2D")

[node name="Death" type="CollisionShape2D" parent="."]
position = Vector2(-3.73248e-07, 4.76837e-07)
rotation = 3.14159
scale = Vector2(0.460992, -0.747105)
shape = SubResource("RectangleShape2D_fdvxk")
debug_color = Color(0.540368, 0.407265, 1, 0.42)

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
texture_filter = 1
sprite_frames = SubResource("SpriteFrames_piqpj")
animation = &"red-spin"
frame_progress = 0.169247

[node name="State Machine" type="Node" parent="." node_paths=PackedStringArray("InitialState")]
script = ExtResource("3_qr86p")
InitialState = NodePath("Idle")

[node name="Idle" type="Node" parent="State Machine"]
script = ExtResource("3_k7uw7")

[node name="Spin" type="Node" parent="State Machine"]
script = ExtResource("4_qr86p")

[node name="LeftDetector" type="Area2D" parent="."]
collision_layer = 256
collision_mask = 68

[node name="LeftCollision" type="CollisionPolygon2D" parent="LeftDetector"]
scale = Vector2(0.573301, 0.625208)
polygon = PackedVector2Array(0, -12.7957, -5.23285, -12.7957, -15.6986, 1.59947, -15.6986, 11.1963, 0, 11.1963)

[node name="RightDetector" type="Area2D" parent="."]
collision_layer = 256
collision_mask = 68

[node name="RightCollision" type="CollisionPolygon2D" parent="RightDetector"]
position = Vector2(11, -8)
scale = Vector2(0.643746, 0.602069)
polygon = PackedVector2Array(-17.0875, 24.9141, -3.10682, 24.9141, -3.10682, 13.2875, -12.4273, 0, -17.0875, 0)

[node name="Top" type="Area2D" parent="."]
self_modulate = Color(0, 1, 1, 1)
collision_layer = 256
collision_mask = 64

[node name="TopCollision" type="CollisionPolygon2D" parent="Top"]
modulate = Color(0.286953, 0.999069, 0.918662, 1)
position = Vector2(7, -9)
scale = Vector2(0.414409, 0.362487)
polygon = PackedVector2Array(-28.9569, 11.0349, -28.9569, 46.8982, -4.82615, 46.8982, -4.82615, 11.0349, -9.6523, 2.75872, -24.1308, 2.75872)

[connection signal="body_entered" from="." to="State Machine/Spin" method="Kill"]
[connection signal="area_entered" from="LeftDetector" to="State Machine/Idle" method="GoToRight"]
[connection signal="body_entered" from="LeftDetector" to="State Machine/Spin" method="GoToRight"]
[connection signal="area_entered" from="RightDetector" to="State Machine/Idle" method="GoToLeft"]
[connection signal="body_entered" from="RightDetector" to="State Machine/Spin" method="GoToLeft"]
[connection signal="area_entered" from="Top" to="State Machine/Spin" method="GoToIdle"]
